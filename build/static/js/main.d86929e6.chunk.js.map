{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","handleSearch","handleSearchStop","onChange","onBlur","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","required","type","Persons","persons","searchResult","handleDeletePerson","style","listStyle","padding","length","map","person","key","name","number","id","onClick","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","message","console","log","className","content","App","useState","setPersons","setNewName","setNewNumber","setSearchResult","setMessage","useEffect","personService","initialPersons","showMessage","setTimeout","event","target","searchTerm","filter","toLowerCase","includes","preventDefault","personObject","isFound","some","toUpdate","changeNumberObject","window","confirm","returnedPerson","catch","error","addNewNumber","concat","personToDelete","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"kOAUeA,EARA,SAAC,GAAwC,IAAtCC,EAAqC,EAArCA,aAAcC,EAAuB,EAAvBA,iBAC9B,OACE,iDACE,2BAAOC,SAAUF,EAAcG,OAAQF,MC2B9BG,EA9BI,SAAC,GAMb,IALLC,EAKI,EALJA,UACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,iBACAC,EAEI,EAFJA,UACAC,EACI,EADJA,mBAEA,OACE,6BACE,0BAAMC,SAAUL,GACd,qCACQ,IACN,2BAAOM,MAAOL,EAASM,UAAU,EAAMV,SAAUK,KAEnD,uCACU,IACR,2BACEI,MAAOH,EACPI,UAAU,EACVV,SAAUO,KAGd,6BACE,4BAAQI,KAAK,UAAb,WCMKC,EA7BC,SAAC,GAAmD,IAAjDC,EAAgD,EAAhDA,QAASC,EAAuC,EAAvCA,aAAcC,EAAyB,EAAzBA,mBAsBxC,OACE,6BACE,wBAAIC,MAAO,CAAEC,UAAW,OAAQC,QAAS,IAtBvCJ,EACEA,EAAaK,OACRL,EAAaM,KAAI,SAACC,GAAD,OACtB,wBAAIC,IAAKD,EAAOE,MACbF,EAAOE,KADV,IACiBF,EAAOG,WAInB,0DAGFX,EAAQO,KAAI,SAACC,GAAD,OACjB,wBAAIC,IAAKD,EAAOI,IACbJ,EAAOE,KADV,IACiBF,EAAOG,OAAQ,IAC9B,4BAAQE,QAAS,kBAAMX,EAAmBM,KAA1C,iB,gBCjBJM,EAAU,eAsBD,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAkB9B,EAfA,SAACC,GAEd,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAa9B,EAVA,SAACP,GAEd,OADgBG,IAAMO,OAAN,UAAgBR,EAAhB,YAA2BF,IAC5BK,MAAK,SAACC,GAAD,OAAcA,MAQrB,EALA,SAACN,EAAIQ,GAElB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwBF,GAAMQ,GAC/BH,MAAK,SAACC,GAAD,OAAcA,EAASC,SCP9BK,EAXM,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAEtB,OADAC,QAAQC,IAAI,YAAaF,GACT,OAAZA,EACK,KACmB,YAAjBA,EAAQ3B,KACV,yBAAK8B,UAAU,WAAWH,EAAQI,SACf,UAAjBJ,EAAQ3B,KACV,yBAAK8B,UAAU,SAASH,EAAQI,cADlC,GCoLMC,EArLH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACT/B,EADS,KACAgC,EADA,OAEcD,mBAAS,IAFvB,mBAETxC,EAFS,KAEA0C,EAFA,OAGkBF,mBAAS,IAH3B,mBAGTtC,EAHS,KAGEyC,EAHF,OAIwBH,mBAAS,MAJjC,mBAIT9B,EAJS,KAIKkC,EAJL,OAKcJ,mBAAS,MALvB,mBAKTN,EALS,KAKAW,EALA,KAOhBC,qBAAU,WACRC,IAAuBrB,MAAK,SAACsB,GAC3BP,EAAWO,QAEZ,IAEH,IAAMC,EAAc,SAACf,GACnBW,EAAWX,GACXgB,YAAW,WACTL,EAAW,QACV,MA6IL,OACE,6BACE,yCACA,kBAAC,EAAD,CAAcX,QAASA,IACvB,kBAAC,EAAD,CAAQxC,aA1DS,SAACyD,GACpBhB,QAAQC,IAAI,iBAAkBe,EAAMC,OAAO/C,OAC3C,IAAMgD,EAAaF,EAAMC,OAAO/C,MAChCuC,EACEnC,EAAQ6C,QAAO,SAACrC,GAAD,OACbA,EAAOE,KAAKoC,cAAcC,SAASH,EAAWE,oBAqDZ5D,iBAhDf,SAACwD,GACxBhB,QAAQC,IAAI,qBACZQ,EAAgB,SA+Cd,yCACA,kBAAC,EAAD,CACE7C,UAjJY,SAACoD,GACjBA,EAAMM,iBAEN,IAAMC,EAAe,CACnBvC,KAAMnB,EACNoB,OAAQlB,GAGJyD,EAAUlD,EAAQmD,MACtB,SAAC3C,GAAD,OAAYA,EAAOE,KAAKoC,gBAAkBvD,EAAQuD,iBAG9CM,EAAWpD,EAAQ6C,QACvB,SAACrC,GAAD,OAAYA,EAAOE,KAAKoC,gBAAkBvD,EAAQuD,iBA8DpDI,EA3DqB,WACnB,IAAMG,EAAkB,2BACnBD,EAAS,IADU,IAEtBzC,OAAQsC,EAAatC,SAIvB,GAFAe,QAAQC,IAAI,kBAAmB0B,GAG7BC,OAAOC,QAAP,UACKF,EAAmB3C,KADxB,2EAGA,CACA,IAAME,EAAKyC,EAAmBzC,GAC9B0B,EACU1B,EAAIyC,GACXpC,MAAK,SAACuC,GACLxB,EACEhC,EAAQO,KAAI,SAACC,GAAD,OACVA,EAAOI,KAAO4C,EAAe5C,GAAKJ,EAASgD,MAG/ChB,EAAY,CACV1C,KAAM,UACN+B,QAAQ,WAAD,OAAa2B,EAAe9C,KAA5B,kBAGV+C,OAAM,SAACC,GACNlB,EAAY,CACV1C,KAAM,QACN+B,QAAQ,kBAAD,OAAoBwB,EAAmB3C,KAAvC,2CAETsB,EACEhC,EAAQ6C,QAAO,SAACrC,GAAD,OAAYA,EAAOI,KAAOyC,EAAmBzC,WA2B5D+C,GApBRrB,EACUW,GACPhC,MAAK,SAACuC,GACL9B,QAAQC,IAAI,mBAAoB6B,GAChCxB,EAAWhC,EAAQ4D,OAAOJ,IAC1BhB,EAAY,CACV1C,KAAM,UACN+B,QAAQ,SAAD,OAAW2B,EAAe9C,WAGpC+C,OAAM,SAACC,GACNhC,QAAQC,IAAI,UAAW+B,GACvBlB,EAAY,CACV1C,KAAM,QACN+B,QAAQ,kBAAD,OAAoBoB,EAAavC,KAAjC,2CAETsB,EAAWhC,EAAQ6C,QAAO,SAACrC,GAAD,OAAYA,EAAOI,KAAOqC,EAAarC,UAMvEc,QAAQC,IAAI,YAAa3B,GACzB0B,QAAQC,IAAI,eAAgBF,GAE5BQ,EAAW,IACXC,EAAa,KAiET3C,QAASA,EACTC,iBAhDmB,SAACkD,GACxBhB,QAAQC,IAAIe,EAAMC,OAAO/C,OACzBqC,EAAWS,EAAMC,OAAO/C,QA+CpBH,UAAWA,EACXC,mBA7CqB,SAACgD,GAC1BhB,QAAQC,IAAIe,EAAMC,OAAO/C,OACzBsC,EAAaQ,EAAMC,OAAO/C,UA6CxB,uCACA,kBAAC,EAAD,CACEI,QAASA,EACTC,aAAcA,EACdC,mBA9CqB,SAAC2D,GAC1BnC,QAAQC,IAAI,wBAAyBkC,GACjCP,OAAOC,QAAP,iBAAyBM,EAAenD,KAAxC,OACF4B,EACUuB,EAAejD,IACtBK,MAAK,SAAC6C,GACLpC,QAAQC,IAAI,iBAAkBmC,GAC9B9B,EACEhC,EAAQ6C,QAAO,SAACrC,GAAD,OAAYA,EAAOE,OAASmD,EAAenD,SAE5D8B,EAAY,CACV1C,KAAM,UACN+B,QAAQ,WAAD,OAAagC,EAAenD,WAGtC+C,OAAM,SAACC,GACNlB,EAAY,CACV1C,KAAM,QACN+B,QAAQ,kBAAD,OAAoBgC,EAAenD,KAAnC,2CAETsB,EACEhC,EAAQ6C,QAAO,SAACrC,GAAD,OAAYA,EAAOI,KAAOiD,EAAejD,UAKhEc,QAAQC,IAAI,eAAgBF,QC7JhCsC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.d86929e6.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ handleSearch, handleSearchStop }) => {\r\n  return (\r\n    <div>filter shown with\r\n      <input onChange={handleSearch} onBlur={handleSearchStop}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addPerson,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name:{\" \"}\r\n          <input value={newName} required={true} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number:{\" \"}\r\n          <input\r\n            value={newNumber}\r\n            required={true}\r\n            onChange={handleNumberChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, searchResult, handleDeletePerson }) => {\r\n  const rows = () => {\r\n    if (searchResult) {\r\n      if (searchResult.length) {\r\n        return searchResult.map((person) => (\r\n          <li key={person.name}>\r\n            {person.name} {person.number}\r\n          </li>\r\n        ));\r\n      } else {\r\n        return <li>No matching search results</li>;\r\n      }\r\n    } else {\r\n      return persons.map((person) => (\r\n        <li key={person.id}>\r\n          {person.name} {person.number}{\" \"}\r\n          <button onClick={() => handleDeletePerson(person)}>delete</button>\r\n        </li>\r\n      ));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ul style={{ listStyle: \"none\", padding: 0 }}>{rows()}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, remove, update };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  console.log(\"message: \", message);\r\n  if (message === null) {\r\n    return null;\r\n  } else if (message.type === \"success\") {\r\n    return <div className=\"success\">{message.content}</div>;\r\n  } else if (message.type === \"error\") {\r\n    return <div className=\"error\">{message.content}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [searchResult, setSearchResult] = useState(null);\r\n  const [message, setMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then((initialPersons) => {\r\n      setPersons(initialPersons);\r\n    });\r\n  }, []);\r\n\r\n  const showMessage = (message) => {\r\n    setMessage(message);\r\n    setTimeout(() => {\r\n      setMessage(null);\r\n    }, 5000);\r\n  };\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    const isFound = persons.some(\r\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\r\n    );\r\n\r\n    const toUpdate = persons.filter(\r\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\r\n    );\r\n\r\n    const addNewNumber = () => {\r\n      const changeNumberObject = {\r\n        ...toUpdate[0],\r\n        number: personObject.number,\r\n      };\r\n      console.log(\"changedNumber: \", changeNumberObject);\r\n\r\n      if (\r\n        window.confirm(\r\n          `${changeNumberObject.name} is already added to phonebook, replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        const id = changeNumberObject.id;\r\n        personService\r\n          .update(id, changeNumberObject)\r\n          .then((returnedPerson) => {\r\n            setPersons(\r\n              persons.map((person) =>\r\n                person.id !== returnedPerson.id ? person : returnedPerson\r\n              )\r\n            );\r\n            showMessage({\r\n              type: \"success\",\r\n              content: `Changed ${returnedPerson.name}'s number`,\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            showMessage({\r\n              type: \"error\",\r\n              content: `Information of ${changeNumberObject.name} has already been removed from server`,\r\n            });\r\n            setPersons(\r\n              persons.filter((person) => person.id !== changeNumberObject.id)\r\n            );\r\n          });\r\n      }\r\n    };\r\n\r\n    const addPersonObject = () => {\r\n      personService\r\n        .create(personObject)\r\n        .then((returnedPerson) => {\r\n          console.log(\"returned person:\", returnedPerson);\r\n          setPersons(persons.concat(returnedPerson));\r\n          showMessage({\r\n            type: \"success\",\r\n            content: `Added ${returnedPerson.name}`,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"error: \", error);\r\n          showMessage({\r\n            type: \"error\",\r\n            content: `Information of ${personObject.name} has already been removed from server`,\r\n          });\r\n          setPersons(persons.filter((person) => person.id !== personObject.id));\r\n        });\r\n    };\r\n\r\n    isFound ? addNewNumber() : addPersonObject();\r\n\r\n    console.log(\"persons: \", persons);\r\n    console.log(\"message is: \", message);\r\n\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    console.log(\"Searching for:\", event.target.value);\r\n    const searchTerm = event.target.value;\r\n    setSearchResult(\r\n      persons.filter((person) =>\r\n        person.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleSearchStop = (event) => {\r\n    console.log(\"searching stopped\");\r\n    setSearchResult(null);\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value);\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    console.log(event.target.value);\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleDeletePerson = (personToDelete) => {\r\n    console.log(\"delete button pressed\", personToDelete);\r\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\r\n      personService\r\n        .remove(personToDelete.id)\r\n        .then((deletedPerson) => {\r\n          console.log(\"person deleted\", deletedPerson);\r\n          setPersons(\r\n            persons.filter((person) => person.name !== personToDelete.name)\r\n          );\r\n          showMessage({\r\n            type: \"success\",\r\n            content: `Deleted ${personToDelete.name}`,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          showMessage({\r\n            type: \"error\",\r\n            content: `Information of ${personToDelete.name} has already been removed from server`,\r\n          });\r\n          setPersons(\r\n            persons.filter((person) => person.id !== personToDelete.id)\r\n          );\r\n        });\r\n    }\r\n\r\n    console.log(\"message is: \", message);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <Filter handleSearch={handleSearch} handleSearchStop={handleSearchStop} />\r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        persons={persons}\r\n        searchResult={searchResult}\r\n        handleDeletePerson={handleDeletePerson}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\n/*\r\n\r\nconst showPopup = () =>\r\n      window.alert(`No duplicates! \\n${newName} is already added to phonebook`);\r\n\r\n\r\n    */\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n"],"sourceRoot":""}